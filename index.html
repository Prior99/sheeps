<html>
	<head>
		<!-- include: "type": "js", "files": "*.js" -->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="style.css" />
	</head>
	<body>
		<div class="wrapper">
			<div class="list">
				<div>
					<img src="img/unknown.png" />
					<h1>Testlevel</h1>
					<p>Lorem ipsum dolor sit amet. Sedipiscir eunt lorem ipsum. Lorem ipsum dolor sit amet. Sedipiscir eunt lorem ipsum.</p>
				</div>
			</div>
		</div>
		<script>
			var FPS = 30;
			$.ajax({
				url : "levels/descriptor.json",
				dataType : "json"
			}).done(function(data) {
				console.log(data);
				for(var i = 0; i < data.length; i++) {
					(function(obj) {
						$("<a href='#'>" + obj.name + "</a>").appendTo($("body")).click(function() {
							startLevel(obj.file);
						});
					})(data[i]);
				}
			});
			
			function startLevel(url) {
				$("body").html("");
				var canvas = $('<canvas id="canvas" width="800" height="600"></canvas>').appendTo("body")[0];
				$.ajax({
					url : url,
					dataType : "text"
				}).done(function(text) {
					var f = eval("(" + text + ")");
					f();
					Game.init(canvas, FPS);
				}).error(function(obj, err1, err2) {
					console.log(err1, err2);
				});
			}
		</script>
	</body>
</html>
