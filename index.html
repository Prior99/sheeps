<html>
	<head>
		<script type="text/javascript" src="lib/jquery.js"></script>
		<script type="text/javascript" src="js/game.js"></script>
		<script type="text/javascript" src="js/cursor.js"></script>
		<script type="text/javascript" src="js/vector.js"></script>
		<script type="text/javascript" src="js/objects/target.js"></script>
		<script type="text/javascript" src="js/objects/hole.js"></script>
		<script type="text/javascript" src="js/objects/wolf.js"></script>
		<script type="text/javascript" src="js/objects/wall.js"></script>
		<script type="text/javascript" src="js/objects/moveablewall.js"></script>
		<script type="text/javascript" src="js/objects/sheep.js"></script>
	</head>
	<body>
		<script>
			var FPS = 30;
			$.ajax({
				url : "list.php",
				dataType : "json"
			}).done(function(data) {
				console.log(data);
				for(var i = 0; i < data.length; i++) {
					(function(file) {
						$("<a href='#'>" + data[i] + "</a>").appendTo($("body")).click(function() {
							startLevel("levels/" +  file);
						});
					})(data[i]);
				}
			});
			
			function startLevel(url) {
				$("body").html("");
				var canvas = $('<canvas id="canvas" width="800" height="600"></canvas>').appendTo("body")[0];
				$.ajax({
					url : url,
					dataType : "script"
				}).done(function() {
					Game.init(canvas, FPS);
				}).error(function(obj, err1, err2) {
					console.log(err1, err2);
				});
			}
		</script>
	</body>
</html>
